<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø®Ø§Ø±Ø·Ø© Ø§Ù„Ø¹Ø±Ø§Ù‚ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

    <style>
        /* --- General Page Styles --- */
        body {
            background: #0f172a;
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            height: 100vh;
            box-sizing: border-box;
            overflow: hidden;
        }

        /* --- Main Layout --- */
        .main-layout {
            display: flex;
            gap: 20px;
            width: 100%;
            height: 85%;
        }

        /* --- Map Style --- */
        #map {
            flex: 3;
            border-radius: 15px;
            border: 2px solid #334155;
            height: 100%;
            z-index: 1;
        }

        /* --- Side Panel Style --- */
        .side-panel {
            flex: 1;
            min-width: 250px;
            background: #1e293b;
            border-radius: 15px;
            padding: 20px;
            border: 2px solid #334155;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .side-panel h3 {
            margin-top: 0;
            margin-bottom: 20px;
            color: #38bdf8;
            text-align: center;
            border-bottom: 1px solid #334155;
            padding-bottom: 10px;
        }

        .side-panel button {
            width: 100%;
            margin-bottom: 10px;
            padding: 12px;
            background: #0f172a;
            color: white;
            border: 1px solid #334155;
            border-radius: 8px;
            cursor: pointer;
            transition: 0.2s;
            font-weight: bold;
        }

        .side-panel button:hover {
            background: #38bdf8;
            color: black;
        }

        /* --- Side Panel Image & Text --- */
        #side-image-container {
            margin-top: 20px;
            text-align: center;
            border-top: 1px solid #334155;
            padding-top: 20px;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        #location-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: 10px;
            border: 2px solid #475569;
            margin-bottom: 15px;
        }

        #location-title {
            color: #f1f5f9;
            margin: 0 0 10px 0;
            font-size: 1.2em;
        }

        #location-desc {
            color: #94a3b8;
            font-size: 0.95em;
            line-height: 1.6;
        }

        #default-msg {
            margin-top: auto;
            color: #64748b;
            text-align: center;
            font-size: 0.9em;
            padding-top: 20px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Animations --- */
        @keyframes pulse-red {
            0% { filter: drop-shadow(0 0 2px #ef4444); opacity: 0.8; }
            50% { filter: drop-shadow(0 0 10px #ef4444); opacity: 1; }
            100% { filter: drop-shadow(0 0 2px #ef4444); opacity: 0.8; }
        }

        .leaflet-interactive[fill="#ef4444"] {
            animation: pulse-red 2s infinite ease-in-out;
        }

        @keyframes glow-green {
            0% { filter: drop-shadow(0 0 5px #22c55e); }
            100% { filter: drop-shadow(0 0 15px #22c55e); }
        }

        .leaflet-interactive[fill="#22c55e"] {
            animation: glow-green 2s infinite alternate;
        }
    </style>
</head>

<body>

    <h2 style="text-align:center; margin-bottom:15px; color:#e2e8f0;">Ø®Ø§Ø±Ø·Ø© Ø§Ù„Ø¹Ø±Ø§Ù‚ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</h2>

    <div class="main-layout">
        <div class="side-panel">
            <h3>Ø§Ù„ØªØ­ÙƒÙ…</h3>
            <button onclick="updateMap('all')">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</button>
            <button onclick="updateMap('affected')">Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ù…ØªØ¶Ø±Ø±Ø©</button>
            <button onclick="updateMap('hope')">Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø£Ù…Ù„</button>
            
            <div id="side-image-container">
                <img id="location-image" src="" alt="Location Image">
                <h3 id="location-title"></h3>
                <p id="location-desc"></p>
            </div>

            <div id="default-msg">
                Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£ÙŠ Ø¯Ø§Ø¦Ø±Ø© ÙÙŠ Ø§Ù„Ø®Ø±ÙŠØ·Ø©<br>Ù„Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„ØªÙØ§ØµÙŠÙ„ Ù‡Ù†Ø§
            </div>
        </div>

        <div id="map"></div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script>
        let map;
        let markers = [];

        // ğŸŸ¢ Complete Data List
        const locations = [
          {
            id: "spiker",
            name: "Ù‚Ø§Ø¹Ø¯Ø© Ø³Ø¨Ø§ÙŠÙƒØ± â€“ ØªÙƒØ±ÙŠØª",
            coords: [34.5969, 43.6786],
            category: "affected",
            info: "Ù…ÙˆÙ‚Ø¹ Ø¬Ø±ÙŠÙ…Ø© Ø³Ø¨Ø§ÙŠÙƒØ± Ø§Ù„Ø£Ù„ÙŠÙ…Ø© (2014)ØŒ Ø­ÙŠØ« Ø§Ø³ØªØ´Ù‡Ø¯ Ù‚Ø±Ø§Ø¨Ø© 1700 Ù…Ù† Ø·Ù„Ø§Ø¨ Ø§Ù„Ù‚ÙˆØ© Ø§Ù„Ø¬ÙˆÙŠØ©.",
            image: "spiker.jpg"
          }, // ğŸ‘ˆ This was missing!
          {
            id: "badoush",
            name: "Ø³Ø¬Ù† Ø¨Ø§Ø¯ÙˆØ´ â€“ Ù†ÙŠÙ†ÙˆÙ‰",
            coords: [36.4253, 42.9231],
            category: "affected",
            info: "Ù…ÙˆÙ‚Ø¹ Ù…Ø¬Ø²Ø±Ø© Ø³Ø¬Ù† Ø¨Ø§Ø¯ÙˆØ´ Ø§Ù„ØªÙŠ Ø±Ø§Ø­ Ø¶Ø­ÙŠØªÙ‡Ø§ Ø§Ù„Ù…Ø¦Ø§Øª Ù…Ù† Ø§Ù„Ø³Ø¬Ù†Ø§Ø¡ Ø§Ù„Ø¹Ø²Ù„.",
            image: "badosh.jpg"
          },
          {
            id: "khasfa",
            name: "Ø­ÙØ±Ø© Ø§Ù„Ø®Ø³ÙØ©",
            coords: [36.1458, 43.1206],
            category: "affected",
            info: "Ø£ÙƒØ¨Ø± Ù…Ù‚Ø¨Ø±Ø© Ø¬Ù…Ø§Ø¹ÙŠØ© Ø·Ø¨ÙŠØ¹ÙŠØ© ÙÙŠ Ø§Ù„Ø¹Ø±Ø§Ù‚ØŒ Ø§Ø³ØªØ®Ø¯Ù…Ù‡Ø§ Ø§Ù„ØªÙ†Ø¸ÙŠÙ… Ù„Ø¥Ø®ÙØ§Ø¡ Ø¬Ø±Ø§Ø¦Ù…Ù‡.",
            image: "khasfa.jpg"
          },
          {
            id: "sinjar",
            name: "Ø³Ù†Ø¬Ø§Ø± â€“ Ø¬Ø¨Ù„ Ø³Ù†Ø¬Ø§Ø±",
            coords: [36.3195, 41.8596],
            category: "affected",
            info: "Ø±Ù…Ø² Ù…Ø£Ø³Ø§Ø© Ø§Ù„Ø¥ÙŠØ²ÙŠØ¯ÙŠÙŠÙ†ØŒ Ø­ÙŠØ« Ø­Ø¯Ø«Øª Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¥Ø¨Ø§Ø¯Ø© ÙˆØ§Ù„ØªÙ‡Ø¬ÙŠØ± Ø§Ù„Ù‚Ø³Ø±ÙŠ.",
            image: ""
          },
          {
            id: "mosul_old_city",
            name: "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© â€“ Ø§Ù„Ù…ÙˆØµÙ„",
            coords: [36.34, 43.13],
            category: "affected",
            info: "Ø´Ù‡Ø¯Øª Ø£Ø´Ø±Ø³ Ø§Ù„Ù…Ø¹Ø§Ø±ÙƒØŒ Ø¯ÙÙ…Ø±Øª Ù…Ø¹Ø§Ù„Ù…Ù‡Ø§ Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠØ© Ù„ÙƒÙ†Ù‡Ø§ ØªØ­Ø±Ø±Øª Ø¨ØµÙ…ÙˆØ¯ Ø£Ø³Ø·ÙˆØ±ÙŠ.",
            image: "mosul.jpg"
          },
          {
            id: "anbar",
            name: "Ø§Ù„Ø£Ù†Ø¨Ø§Ø±",
            coords: [33.3750, 43.8850],
            category: "affected",
            info: "Ø³Ø§Ø­Ø© Ù…Ø¹Ø§Ø±Ùƒ ÙˆØ§Ø³Ø¹Ø© Ø¶Ø¯ Ø§Ù„Ø¥Ø±Ù‡Ø§Ø¨ØŒ Ù…Ù† Ø§Ù„ÙÙ„ÙˆØ¬Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù….",
            image: "anbar.jpg"
          },
          {
            id: "baghdad",
            name: "Ø¨ØºØ¯Ø§Ø¯ â€“ Ø§Ù„Ù…ØªÙ†Ø¨ÙŠ",
            coords: [33.3152, 44.3661],
            category: "hope",
            info: "Ø´Ø§Ø±Ø¹ Ø§Ù„Ù…ØªÙ†Ø¨ÙŠØŒ Ø±Ø¦Ø© Ø¨ØºØ¯Ø§Ø¯ Ø§Ù„Ø«Ù‚Ø§ÙÙŠØ© ÙˆØ±Ù…Ø² Ø§Ù„Ø­ÙŠØ§Ø© Ø§Ù„Ø°ÙŠ ÙŠÙ†Ø¨Ø¶ Ø¨Ø§Ù„ÙÙ† ÙˆØ§Ù„Ø£Ø¯Ø¨.",
            image: ""
          },
          {
            id: "karbala",
            name: "ÙƒØ±Ø¨Ù„Ø§Ø¡ Ø§Ù„Ù…Ù‚Ø¯Ø³Ø©",
            coords: [32.6160, 44.0249],
            category: "hope",
            info: "Ù…Ø±ÙƒØ² Ø¯ÙŠÙ†ÙŠ Ø¹Ø§Ù„Ù…ÙŠ ÙˆÙ†Ù‡Ø¶Ø© Ø¹Ù…Ø±Ø§Ù†ÙŠØ© ÙˆØªÙˆØ³Ø¹ ÙÙŠ Ø§Ù„Ø¨Ù†Ù‰ Ø§Ù„ØªØ­ØªÙŠØ© Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ù„Ø§ÙŠÙŠÙ†.",
            image: ""
          },
          {
            id: "basra",
            name: "Ø§Ù„Ø¨ØµØ±Ø©",
            coords: [30.5081, 47.7822],
            category: "hope",
            info: "Ø«ØºØ± Ø§Ù„Ø¹Ø±Ø§Ù‚ Ø§Ù„Ø¨Ø§Ø³Ù…ØŒ Ø§Ø³ØªØ¶Ø§ÙØª Ø®Ù„ÙŠØ¬ÙŠ 25 ÙˆØ¹ÙƒØ³Øª ÙƒØ±Ù… ÙˆØ¶ÙŠØ§ÙØ© Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠÙŠÙ†.",
            image: ""
          },
          {
            id: "erbil",
            name: "Ø£Ø±Ø¨ÙŠÙ„",
            coords: [36.1911, 44.0092],
            category: "hope",
            info: "Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø³ÙŠØ§Ø­Ø© Ø§Ù„ØµÙŠÙÙŠØ©ØŒ ØªØªÙ…ÙŠØ² Ø¨Ù‚Ù„Ø¹ØªÙ‡Ø§ Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠØ© ÙˆØ§Ù„ØªØ·ÙˆØ± Ø§Ù„Ø¹Ù…Ø±Ø§Ù†ÙŠ Ø§Ù„Ø³Ø±ÙŠØ¹.",
            image:""
          }
        ];

        // Initialize Map
        map = L.map('map').setView([33.3152, 44.3661], 6);

        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
            attribution: 'Â© OpenStreetMap'
        }).addTo(map);

        function updateMap(filter) {
            markers.forEach(m => map.removeLayer(m));
            markers = [];
            
            document.getElementById('side-image-container').style.display = 'none';
            document.getElementById('default-msg').style.display = 'block';

            locations.forEach(loc => {
                if (filter === 'all' || loc.category === filter) {
                    
                    const color = loc.category === "affected" ? "#ef4444" : "#22c55e";

                    const marker = L.circleMarker(loc.coords, {
                        color: color,
                        fillColor: color,
                        fillOpacity: 0.7,
                        radius: 12,
                        weight: 2
                    }).addTo(map);

                    marker.on('click', () => {
                        showInSidePanel(loc);
                    });

                    marker.bindTooltip(loc.name);
                    markers.push(marker);
                }
            });
        }

        function showInSidePanel(location) {
            document.getElementById('default-msg').style.display = 'none';
            
            const container = document.getElementById('side-image-container');
            container.style.display = 'block';

            const imgElement = document.getElementById('location-image');
            imgElement.src = location.image;
            imgElement.alt = location.name;
            
            document.getElementById('location-title').innerText = location.name;
            document.getElementById('location-desc').innerText = location.info;
        }

        updateMap('all');
    </script>
</body>
</html>
